"use strict";(self.webpackChunkdm_trade=self.webpackChunkdm_trade||[]).push([[86,362],{371:(e,a,t)=>{t.d(a,{h:()=>s});var r,n,l=t(540);function o(){return o=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},o.apply(null,arguments)}var s=function(e){return l.createElement("svg",o({xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",className:"done-icon_svg__bi done-icon_svg__bi-check-circle",viewBox:"0 0 16 16"},e),r||(r=l.createElement("path",{d:"M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14m0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16"})),n||(n=l.createElement("path",{d:"m10.97 4.97-.02.022-3.473 4.425-2.093-2.094a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-1.071-1.05"})))}},835:(e,a,t)=>{t.d(a,{A:()=>r});const r={overlay:"modal-module__overlay__AOHEj",overlay__active:"modal-module__overlay__active__sHMpX",modal:"modal-module__modal__u3A6Y",modal__product:"modal-module__modal__product__Ud5Eq",modal__register:"modal-module__modal__register__h_IsF","modal__register-icon":"modal-module__modal__register-icon__c1s5L",modal__icon:"modal-module__modal__icon__SiNJB",image:"modal-module__image__IqwlC",info:"modal-module__info__a920H"}},362:(e,a,t)=>{t.r(a),t.d(a,{default:()=>i});var r,n=t(848),l=t(835),o=t(961),s=t(540);function c(){return c=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},c.apply(null,arguments)}var _=function(e){return s.createElement("svg",c({xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",className:"close_svg__bi close_svg__bi-x-lg",viewBox:"0 0 16 16"},e),r||(r=s.createElement("path",{d:"M2.146 2.854a.5.5 0 1 1 .708-.708L8 7.293l5.146-5.147a.5.5 0 0 1 .708.708L8.707 8l5.147 5.146a.5.5 0 0 1-.708.708L8 8.707l-5.146 5.147a.5.5 0 0 1-.708-.708L7.293 8z"})))};function i(e){var a=e.handleClose,t=e.children,r=document.querySelector("body");return(0,s.useEffect)((function(){return document.body.style.overflow="hidden",function(){document.body.style.overflow=""}}),[]),(0,n.jsx)(n.Fragment,{children:r&&(0,o.createPortal)((0,n.jsx)("div",{className:"".concat(l.A.overlay),children:(0,n.jsxs)("article",{className:l.A.modal,children:[(0,n.jsx)(_,{className:l.A.modal__icon,onClick:a}),t]})}),r)})}},86:(e,a,t)=>{t.r(a),t.d(a,{default:()=>P});var r=t(848);const n={section:"order-page-module__section__LuM8X",basket:"order-page-module__basket__IwfeE",basket__list:"order-page-module__basket__list__mc8sD",basket__price:"order-page-module__basket__price__AiyFF",empty:"order-page-module__empty__Dpd3s"};var l=t(767),o=t(364),s=t(744);const c={form:"order-form-module__form__ioSnL",form__filedset:"order-form-module__form__filedset__PF974",form__radio:"order-form-module__form__radio__Iah9D","form__radio-label":"order-form-module__form__radio-label__hkUU6",form__input:"order-form-module__form__input__hCoEf",form__textarea:"order-form-module__form__textarea__vzkFo"};var _=t(540),i=t(362),d=t(835),m=t(371);function u(e){var a=e.navigate;return(0,r.jsxs)("div",{className:d.A.modal__register,children:[(0,r.jsx)(m.h,{className:d.A["modal__register-icon"]}),(0,r.jsx)("h2",{className:d.A["modal__register-title"],children:"Закза успешно отправлен!"}),(0,r.jsx)("p",{children:"По указанному номеру телефона в ближайшее время с вами свяжется менеджер для уточнения детаелй доставки."}),(0,r.jsx)("button",{className:"".concat(d.A["modal__register-button"]," button"),onClick:a,children:"Закрыть"})]})}var h=function(){return h=Object.assign||function(e){for(var a,t=1,r=arguments.length;t<r;t++)for(var n in a=arguments[t])Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n]);return e},h.apply(this,arguments)};function p(e){var a=e.user,t=e.basketProducts,n=e.totalBasketPrice,l=e.handleClose,o=(0,_.useState)({name:(null==a?void 0:a.name)||"",email:(null==a?void 0:a.email)||"",phone:(null==a?void 0:a.phone)||"",delivery:"pickup",address:"",commentary:"",products:t,totalBasketPrice:n}),s=o[0],d=o[1],m=(0,_.useState)(!1),p=m[0],f=m[1],v=function(e){d((function(a){return h(h({},a),{delivery:e.target.value})}))},b=function(e){d((function(a){var t;return h(h({},a),((t={})[e.target.name]=e.target.value,t))}))};return(0,r.jsxs)("section",{className:c.section,children:[(0,r.jsxs)("form",{className:c.form,onSubmit:function(e){e.preventDefault(),console.log(s),f(!0)},children:[(0,r.jsxs)("fieldset",{className:c.form__filedset,children:[(0,r.jsxs)("label",{htmlFor:"pickup",className:c["form__radio-label"],children:[(0,r.jsx)("input",{id:"pickup",name:"deliveryMethod",type:"radio",value:"pickup",checked:"pickup"===s.delivery,onChange:v,className:c.form__radio}),"Самовывоз ([указать адрес выдачи заказа])"]}),(0,r.jsxs)("label",{htmlFor:"in-shop",className:c["form__radio-label"],children:[(0,r.jsx)("input",{id:"in-shop",name:"deliveryMethod",placeholder:"da",type:"radio",value:"in-shop",checked:"in-shop"===s.delivery,onChange:v,className:c.form__radio}),"Заказать доставку (Стоимость доставки согласуется с менеджером)"]})]}),(0,r.jsxs)("fieldset",{className:c.form__filedset,children:[(0,r.jsx)("label",{htmlFor:"name",className:c.form__label,children:"Ваше ФИО"}),(0,r.jsx)("input",{name:"name",type:"text",placeholder:"Введите ФИО",value:s.name,onChange:b,className:c.form__input})]}),(0,r.jsxs)("fieldset",{className:c.form__filedset,children:[(0,r.jsx)("label",{htmlFor:"email",className:c.form__label,children:"E-mail"}),(0,r.jsx)("input",{name:"email",type:"email",placeholder:"Введите E-mail",value:s.email,onChange:b,className:c.form__input})]}),(0,r.jsxs)("fieldset",{className:c.form__filedset,children:[(0,r.jsx)("label",{htmlFor:"phone",className:c.form__label,children:"Номер телефона"}),(0,r.jsx)("input",{name:"phone",type:"tel",placeholder:"Введите пароль",value:s.phone,onChange:b,className:c.form__input})]}),"in-shop"===s.delivery&&(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("fieldset",{className:c.form__filedset,children:[(0,r.jsx)("label",{htmlFor:"address",className:c.form__label,children:"Адрес"}),(0,r.jsx)("input",{name:"address",type:"text",placeholder:"Введите адрес доставки",value:s.address,onChange:b,className:c.form__input})]})}),(0,r.jsxs)("fieldset",{className:c.form__filedset,children:[(0,r.jsx)("label",{htmlFor:"commentary",className:c.form__label,children:"Комментарии к заказу"}),(0,r.jsx)("textarea",{name:"commentary",placeholder:"Оставьте комментарий для заказа либо пропустите это поле.",rows:6,className:c.form__textarea})]}),(0,r.jsx)("button",{className:"".concat(c.button," button"),type:"submit",children:"Оформить заказ"})]}),p&&(0,r.jsx)(i.default,{handleClose:l,children:(0,r.jsx)(u,{navigate:l})})]})}const f={card:"basket-product-module__card__iZd0U",card__image:"basket-product-module__card__image__actDK",card__name:"basket-product-module__card__name__JV99r","card__name-container":"basket-product-module__card__name-container__I8JRc",card__counter:"basket-product-module__card__counter__RzsY5",button:"basket-product-module__button__Uyuzw",button__decrement:"basket-product-module__button__decrement__jNQ9x",button__increment:"basket-product-module__button__increment__jOI5D","card__counter-container":"basket-product-module__card__counter-container__pNCDs",delete:"basket-product-module__delete__gSR_P",delete__icon:"basket-product-module__delete__icon__lz4Pq",icon:"basket-product-module__icon__ZH_Mu"};var v;function b(){return b=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},b.apply(null,arguments)}var x,j=function(e){return _.createElement("svg",b({xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",className:"remove-icon_svg__bi remove-icon_svg__bi-dash",viewBox:"0 0 16 16"},e),v||(v=_.createElement("path",{d:"M4 8a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7A.5.5 0 0 1 4 8"})))};function g(){return g=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},g.apply(null,arguments)}var N,k=function(e){return _.createElement("svg",g({xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",className:"add-icon_svg__bi add-icon_svg__bi-plus",viewBox:"0 0 16 16"},e),x||(x=_.createElement("path",{d:"M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4"})))};function y(){return y=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},y.apply(null,arguments)}var w=function(e){return _.createElement("svg",y({xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",className:"delete-icon_svg__bi delete-icon_svg__bi-trash3-fill",viewBox:"0 0 16 16"},e),N||(N=_.createElement("path",{d:"M11 1.5v1h3.5a.5.5 0 0 1 0 1h-.538l-.853 10.66A2 2 0 0 1 11.115 16h-6.23a2 2 0 0 1-1.994-1.84L2.038 3.5H1.5a.5.5 0 0 1 0-1H5v-1A1.5 1.5 0 0 1 6.5 0h3A1.5 1.5 0 0 1 11 1.5m-5 0v1h4v-1a.5.5 0 0 0-.5-.5h-3a.5.5 0 0 0-.5.5M4.5 5.029l.5 8.5a.5.5 0 1 0 .998-.06l-.5-8.5a.5.5 0 1 0-.998.06m6.53-.528a.5.5 0 0 0-.528.47l-.5 8.5a.5.5 0 0 0 .998.058l.5-8.5a.5.5 0 0 0-.47-.528M8 4.5a.5.5 0 0 0-.5.5v8.5a.5.5 0 0 0 1 0V5a.5.5 0 0 0-.5-.5"})))};function C(e){var a=e.handleDeсrement,t=e.handleIncrement,n=e.handleDelete,l=e.data;return(0,r.jsx)("li",{className:f.basket__item,children:(0,r.jsxs)("article",{className:f.card,children:[(0,r.jsx)("img",{src:l.image,alt:l.name,className:f.card__image}),(0,r.jsxs)("div",{className:f["card__name-container"],children:[(0,r.jsx)("h4",{className:f.card__name,children:l.name}),(0,r.jsxs)("p",{className:f.card__article,children:[(0,r.jsx)("b",{children:"Артикул:"})," ",l.article]}),(0,r.jsxs)("p",{className:f.card__quantity,children:[(0,r.jsx)("b",{children:"Осталось в магазине:"})," ",l.count," шт."]})]}),(0,r.jsxs)("div",{className:f["card__counter-container"],children:[(0,r.jsxs)("div",{className:f.card__counter,children:[l.basketCount<=l.count&&l.basketCount>1&&(0,r.jsx)("button",{onClick:a,className:"".concat(f.button," ").concat(f.button__decrement),children:(0,r.jsx)(j,{className:"".concat(f.icon," icon")})}),(0,r.jsxs)("p",{className:f["card__counter-text"],children:[(0,r.jsx)("b",{children:"Кол-во"}),(0,r.jsx)("br",{}),l.basketCount," шт."]}),l.basketCount<l.count&&(0,r.jsx)("button",{onClick:t,className:"".concat(f.button," ").concat(f.button__increment),children:(0,r.jsx)(k,{className:"".concat(f.icon," icon")})})]}),(0,r.jsx)("p",{className:f.card__price,children:(0,r.jsxs)("b",{children:[l.totalPrice," ₽"]})})]}),(0,r.jsx)("button",{onClick:n,className:"".concat(f.button," ").concat(f.delete),children:(0,r.jsx)(w,{className:"".concat(f.delete__icon," icon")})})]})})}var O=t(919),A=function(){return A=Object.assign||function(e){for(var a,t=1,r=arguments.length;t<r;t++)for(var n in a=arguments[t])Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n]);return e},A.apply(this,arguments)};function P(){var e=(0,l.Zp)(),a=(0,o.d4)(O.Ax.currentUserSelector),t=(0,o.d4)(s.Bv.productsSelector),c=(0,o.d4)(s.Bv.totalPriceSelector),_=(0,o.d4)(s.Bv.totalPriceSelector),i=t.reduce((function(e,a){return e+a.basketCount}),0),d=(0,o.wA)();return(0,r.jsx)("section",{className:n.section,children:t.length?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:n.basket,children:[(0,r.jsx)("h1",{className:n.section__title,children:"Корзина"}),(0,r.jsx)("ul",{className:n.basket__list,children:t.map((function(e){return e.basketCount>0&&(0,r.jsx)(C,{handleDeсrement:function(){return d(s.Od.decrementProductAction(e.id))},handleIncrement:function(){return d(s.Od.incrementProductAction(A(A({},e),{basketCount:1})))},handleDelete:function(){return d(s.Od.removeProductAction(e.id))},data:e},e.id)}))}),(0,r.jsxs)("p",{className:n.basket__price,children:["Итого:"," ",(0,r.jsxs)("b",{children:["".concat(i>0?i:null," ").concat(i%10==1&&i%100!=11?"товар":i%10>=2&&i%10<=4&&(i%100<10||i%100>=20)?"товара":"товаров")," ","= ",_," ₽"]})]})]}),(0,r.jsxs)("div",{className:"".concat(n.basket," ").concat(n.order),children:[(0,r.jsx)("h2",{className:n.section__title,children:"Оформление заказа"}),(0,r.jsx)(p,{user:a,basketProducts:t,totalBasketPrice:c,handleClose:function(){e("/profile/order"),d(s.Od.clearBasketAction())}})]})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("h1",{className:n.empty,children:"В корзине пусто."}),(0,r.jsx)("p",{className:n.empty,children:"Добавьте хотя бы 1 товар, чтобы перейти к оформлению заказа."})]})})}}}]);